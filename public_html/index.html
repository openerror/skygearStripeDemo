<html>
  <head>
    <title>Skygear + Stripe demo</title>
    <!--Skygear CDN-->
    <script src="https://code.skygear.io/js/skygear/1.1.0/skygear.min.js"></script>
    <!-- OG metadata -->
    <meta property="og:title" content="Skygear + Stripe demo" />
    <meta property="og:description" content="Skygear Cloud Function to send form data to emails from static website" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://skygear-demo.github.io/skymail" />
    <meta property="og:image" content="" />
    <!-- End of OG metadata -->

    <link rel="stylesheet" type="text/css" href="index.css">
  </head>
  <body>
    <div id="response">
      <span id="response-msg"></span><br>
      <button id="back-button">Back</button>
    </div>

    <form name="orderForm">
      <h2 class="logo">Skygear X Stripe Payment (demo)</h2>
      <p>This webpage will become a simple demo for calling the Stripe API from Skygear. To that end, Python cloud functions will be invoked through Javascript embedded in the HTML file.</p>

      <label for="order_item">Please select the desired product.</label>
      <br>
      <select name="order_item" onchange="orderTotal()">
         <option value="bean_standard_100">Coffee Beans, Standard, 100g pack</option>
         <option value="bean_deluxe_100">Coffee Beans, Deluxe, 100g pack</option>
      </select>

      <br>
      <br>

      <label for="order_amount">Please select the amount you wish to order: </label>
      <select name="order_amount" onchange="orderTotal()">
         <option selected hidden value="-1">Choose here</option>
         <option value="1" >1</option>
         <option value="2" >2</option>
         <option value="3" >3</option>
         <option value="4" >4</option>
      </select>

      <br>
      <br>

      Order total (USD): <b id="total"></b>

      <br>

      <label> Next, please enter your contact information, and any special requests regarding order delivery :)</label>
      <br><br>
      <label for="name">Name</label>
      <br>
      <input type="text" name="name" id="name" placeholder="CKL"><br />

      <label for="emailAddress">Repient Email</label>
      <br>
      <input type="email" name="email" id="email" placeholder="To whom?"><br />

      <label for="message">Message</label>
      <br>
      <textarea name="message" id="message" rows="5" cols="10" placeholder="Your message">This is a demo email from Skymail.
It's an open source project for building simple mailing services - fork it at https://github.com/skygear-demo/skymail
      </textarea><br/>
    </form>

    <p id="testCards">To avoid using your own credit card number, input one of the test cards provided by Stripe.
        For instance, you can use 4242 4242 4242 4242, and any arbitary expiration date, CSV and ZIP code.
        See <a href="https://stripe.com/docs/testing#cards">here</a> for a comprehensive list.
    </p>
    <!--Stripe card payment form-->
    <script src="https://js.stripe.com/v3/"></script>
    <form action="/charge" method="post" id="payment-form">
      <div class="form-row">
        <label for="card-element">
          Credit or debit card
        </label>
        <div id="card-element">
          <!-- A Stripe Element will be inserted here. -->
        </div>

        <!-- Used to display form errors. -->
        <div id="card-errors" role="alert"></div>
      </div>

      <button>Submit Payment</button>
    </form>

    <!--Skygear configuration-->
    <!--The app end point and the api key can be found in the developer portal-->
    <script src="index.js"></script>
  </body>
</html>
