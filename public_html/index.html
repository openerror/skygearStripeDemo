<html>
  <head>
    <title>Skygear + Stripe demo</title>
    <!--Skygear CDN-->
    <script src="https://code.skygear.io/js/polyfill/latest/polyfill.min.js"></script>
    <script src="https://code.skygear.io/js/skygear/latest/skygear.min.js"></script>
    <!-- OG metadata -->
    <meta property="og:title" content="Skygear + Stripe demo" />
    <meta property="og:description" content="Skygear Cloud Function to send form data to emails from static website" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://skygear-demo.github.io/skygearStripeDemo" />
    <meta property="og:image" content="" />
    <!-- End of OG metadata -->

    <link rel="stylesheet" type="text/css" href="index.css">
  </head>
  <body>
    <div id="response">
      <span id="response-msg"></span><br>
      <button id="back-button">Back</button>
    </div>

    <!--Stripe card payment form-->
    <h2 class="logo">Skygear X Stripe Payment (demo)</h2>
    <form action="/charge" method="post" id="payment-form" name="paymentForm">
      <div class="info">
        <p>This webpage is a simple demo for calling the Stripe API from Skygear. Python cloud functions will be invoked through Javascript embedded in the HTML file.</p>
      </div>

      <h3>1. Make an order</h3>
      <label for="order_item">Please select the desired product:</label>
      <br>
      <select name="order_item" onchange="orderTotal()">
         <option value="bean_standard_100">Coffee Beans, Standard, 100g pack</option>
         <option value="bean_deluxe_100">Coffee Beans, Deluxe, 100g pack</option>
      </select>

      <br><br>

      <label for="order_amount">and the amount you wish to order: </label>
      <select name="order_amount" onchange="orderTotal()">
         <option selected hidden value="-1">Choose here</option>
         <option value="1" >1</option>
         <option value="2" >2</option>
         <option value="3" >3</option>
         <option value="4" >4</option>
      </select>

      <br>
      <br>


      Order total (USD): <b id="total">0</b>

      <br>
      <hr>
      <h3>2. Fill in your information</h3>

      <label> Next, please enter your contact information.</label>
      <br><br>

      <label for="name">Client Name</label>
      <br>
      <input type="text" name="name" id="name" placeholder="Enter your name here"><br />
      <h3>3. Enter card information</h3>

      <p id="testCards">To avoid using your own credit card number, input one of the test cards provided by Stripe.<br><br>
      For instance, you can use <code>4242 4242 4242 4242</code>, and any arbitary expiration date, CSV and ZIP code. See <a href="https://stripe.com/docs/testing#cards">here</a> for a comprehensive list.
      </p>
      <div class="form-row">
        <label for="card-element">
        </label>
        <div id="card-element">
          <!-- A Stripe Element will be inserted here. -->
        </div>

        <!-- Used to display form errors. -->
        <div id="card-errors" role="alert"></div>
        <div class="submit-row"><button>Submit Payment</button></div>
      </div>

      
    </form>

    <!--Skygear configuration-->
    <!--The app end point and the api key can be found in the developer portal-->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="index.js"></script>
  </body>
</html>
